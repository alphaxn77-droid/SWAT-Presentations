<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>التقديمات – الإدارة</title>
<link rel="stylesheet" href="style.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

<div class="card" style="text-align:center;">
<h2>صفحة التقديمات (للإدارة فقط)</h2>

<div id="login">
  <input type="password" id="password" placeholder="كلمة المرور">
  <button id="loginBtn">دخول</button>
</div>

<div id="content" style="display:none;">
  <h3>جميع التقديمات</h3>
  <div id="list"></div>
</div>
</div>

<script type="module">
import { db } from "./firebase.js";
import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

document.getElementById("loginBtn").addEventListener("click", () => {
  if (document.getElementById("password").value === "admin123") {
    document.getElementById("login").style.display = "none";
    document.getElementById("content").style.display = "block";
    loadSubmissions();
  } else {
    alert("❌ كلمة المرور غير صحيحة");
  }
});

async function loadSubmissions() {
  const list = document.getElementById("list");
  list.innerHTML = "جاري التحميل...";

  const snapshot = await getDocs(collection(db, "submissions"));
  list.innerHTML = "";

  snapshot.forEach(doc => {
    const s = doc.data();
    list.innerHTML += `
      <div class="card" style="margin-top:15px; text-align:right;">
        <h3>${s.type}</h3>
        <p><b>الاسم:</b> ${s.name}</p>
        <p><b>الرتبة:</b> ${s.rank}</p>
        <p><b>الوقت:</b> ${s.time}</p>

        <p><b>الخبرة:</b> ${s.experience}</p>
        <p><b>AA:</b> ${s.AA}</p>
        <p><b>BH:</b> ${s.BH}</p>
        <p><b>CD:</b> ${s.CD}</p>
        <p><b>PG:</b> ${s.PG}</p>
        <p><b>RK:</b> ${s.RK}</p>
        <p><b>DM:</b> ${s.DM}</p>
        <p><b>GR:</b> ${s.GR}</p>
        <p><b>LTA:</b> ${s.LTA}</p>
        <p><b>MG:</b> ${s.MG}</p>
        <p><b>NG:</b> ${s.NG}</p>
        <p><b>SA:</b> ${s.SA}</p>
        <p><b>TK:</b> ${s.TK}</p>
        <p><b>UH:</b> ${s.UH}</p>
        <p><b>VDM:</b> ${s.VDM}</p>
        <p><b>WA:</b> ${s.WA}</p>
        <p><b>NK:</b> ${s.NK}</p>
        <p><b>DOS:</b> ${s.DOS}</p>
        <p><b>PK:</b> ${s.PK}</p>

        ${s.hq ? `<p><b>/hq:</b> ${s.hq}</p>` : ""}
        ${s.issuebadge ? `<p><b>/issuebadge:</b> ${s.issuebadge}</p>` : ""}
        ${s.fl ? `<p><b>/fl:</b> ${s.fl}</p>` : ""}
        ${s.gov ? `<p><b>/gov:</b> ${s.gov}</p>` : ""}

        <p><b>كود5:</b> ${s.code5}</p>
        <p><b>كود0:</b> ${s.code0}</p>
        <p><b>كود8:</b> ${s.code8}</p>
        <p><b>كود7:</b> ${s.code7}</p>
        <p><b>كود10:</b> ${s.code10}</p>
        <p><b>كود6:</b> ${s.code6}</p>
        <p><b>كود4:</b> ${s.code4}</p>
        <p><b>كود1:</b> ${s.code1}</p>
        <p><b>كود11:</b> ${s.code11}</p>

        <p><b>10-1:</b> ${s.t10_1}</p>
        <p><b>10-2:</b> ${s.t10_2}</p>
        <p><b>10-3:</b> ${s.t10_3}</p>
        <p><b>10-4:</b> ${s.t10_4}</p>
        <p><b>10-5:</b> ${s.t10_5}</p>

        ${s.members_problem ? `<p><b>مشكلة عضوين:</b> ${s.members_problem}</p>` : ""}
        ${s.leader_abuse ? `<p><b>استعمال السلطة:</b> ${s.leader_abuse}</p>` : ""}
      </div>
    `;
  });
}
</script>

</body>
</html>
